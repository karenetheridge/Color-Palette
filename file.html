<html>
<head>
  <title>Test Page</title>
  <script src='http://rjbs.manxome.org/js/jquery.js'></script>
</head>

<script>
var palette = {
  pobox  : {"brightText":[200,223,254,0],"linkText":[4,63,166,0],"background":[238,238,238,0],"poboxBlueLight":[200,223,254,0],"poboxRedDark":[164,0,5,0],"plainText":[0,0,0,0],"errorText":[164,0,5,0],"white":[255,255,255,0],"black":[0,0,0,0],"poboxBlueDark":[4,63,166,0],"lowlight":[51,51,51,0],"poboxBlue":[10,94,255,0],"highlight":[10,94,255,0]},
  listbox: {"brightText":[185,219,93,0],"linkText":[62,81,19,0],"background":[238,238,238,0],"listboxGreenDark":[62,81,19,0],"listboxGreen":[102,153,0,0],"plainText":[0,0,0,0],"errorText":[164,0,5,0],"white":[255,255,255,0],"black":[0,0,0,0],"lowlight":[51,51,51,0],"highlight":[102,153,0,0],"listboxRedDark":[164,0,5,0],"listboxGreenLight":[185,219,93,0]},
};

function makeRGBA(arr) {
  var str = 'rgb(' + arr[0] + ', ' + arr[1] + ', ' + arr[2] + ')';

  return str;
}

function applyStyle(which) {
  var pal = palette[ which ];
  var rgb_str;
  
  $("body").css({ backgroundColor: makeRGBA(pal.background) });

  $("h1").css({ color: makeRGBA(pal.highlight) });

  $(".error").css({ color: makeRGBA(pal.errorText)});

  $("blockquote").css({
    color: makeRGBA(pal.highlight),
    backgroundColor: makeRGBA(pal.lowlight)
  });

  $("pre").css({
    border: "medium dashed " + makeRGBA(pal.linkText)
  });
}
</script>

<body>
  <h1>This is a Demo Page</h1>

  <div class='error'>error text</div>
  <blockquote>
    This is some demo text.
  </blockquote>

  <p>
    ...and here is some boring normal text.
  </p>

  <button onClick="applyStyle('pobox')">Pobox</button>
  <button onClick="applyStyle('listbox')">Listbox</button>

<pre>
use strict;
use warnings;

use Color::Palette;
use HTML::Entities;
use JSON;

my %pobox_colors = (
  background =&gt; [ 0xEE, 0xEE, 0xEE ],

  plainText  =&gt; &#39;black&#39;,
  errorText  =&gt; &#39;poboxRedDark&#39;,
  brightText =&gt; &#39;poboxBlueLight&#39;,

  highlight  =&gt; &#39;poboxBlue&#39;,
  lowlight   =&gt; [ 0x33, 0x33, 0x33 ],

  linkText   =&gt; &#39;poboxBlueDark&#39;,

  black      =&gt; [ 0x00, 0x00, 0x00 ],
  white      =&gt; [ 0xFF, 0xFF, 0xFF ],

  poboxBlue      =&gt; [ 0x0A, 0x5E, 0xFF ],
  poboxBlueDark  =&gt; [ 0x04, 0x3F, 0xA6 ],
  poboxBlueLight =&gt; [ 0xC8, 0xDF, 0xFE ],
  poboxRedDark   =&gt; [ 0xA4, 0x00, 0x05 ],
);

my %listbox_colors = (
  background =&gt; [ 0xEE, 0xEE, 0xEE ],

  plainText  =&gt; &#39;black&#39;,
  errorText  =&gt; &#39;listboxRedDark&#39;,
  brightText =&gt; &#39;listboxGreenLight&#39;,

  highlight  =&gt; &#39;listboxGreen&#39;,
  lowlight   =&gt; [ 0x33, 0x33, 0x33 ],

  linkText   =&gt; &#39;listboxGreenDark&#39;,

  black      =&gt; [ 0x00, 0x00, 0x00 ],
  white      =&gt; [ 0xFF, 0xFF, 0xFF ],

  listboxGreen      =&gt; [ 0x66, 0x99, 0x00 ],
  listboxGreenDark  =&gt; [ 0x3E, 0x51, 0x13 ],
  listboxGreenLight =&gt; [ 0xB9, 0xDB, 0x5D ],
  listboxRedDark    =&gt; [ 0xA4, 0x00, 0x05 ],
);


my @required = qw(
  background plainText errorText brightText highlight lowlight linkText
);

my $pobox_palette = Color::Palette-&gt;new({
  required =&gt; \@required,
  colors   =&gt; \%pobox_colors,
});

my $listbox_palette = Color::Palette-&gt;new({
  required =&gt; \@required,
  colors   =&gt; \%listbox_colors,
});

my $pcs = JSON-&gt;new-&gt;encode($pobox_palette-&gt;colors);
my $lcs = JSON-&gt;new-&gt;encode($listbox_palette-&gt;colors);

my $HTML = &lt;&lt;&quot;HTML&quot;;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Test Page&lt;/title&gt;
  &lt;script src=&#39;http://rjbs.manxome.org/js/jquery.js&#39;&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;script&gt;
var palette = {
  pobox  : $pcs,
  listbox: $lcs,
};

function makeRGBA(arr) {
  var str = &#39;rgb(&#39; + arr[0] + &#39;, &#39; + arr[1] + &#39;, &#39; + arr[2] + &#39;)&#39;;

  return str;
}

function applyStyle(which) {
  var pal = palette[ which ];
  var rgb_str;
  
  \$(&quot;body&quot;).css({ backgroundColor: makeRGBA(pal.background) });

  \$(&quot;h1&quot;).css({ color: makeRGBA(pal.highlight) });

  \$(&quot;.error&quot;).css({ color: makeRGBA(pal.errorText)});

  \$(&quot;blockquote&quot;).css({
    color: makeRGBA(pal.highlight),
    backgroundColor: makeRGBA(pal.lowlight)
  });

  \$(&quot;pre&quot;).css({
    border: &quot;medium dashed &quot; + makeRGBA(pal.linkText)
  });
}
&lt;/script&gt;

&lt;body&gt;
  &lt;h1&gt;This is a Demo Page&lt;/h1&gt;

  &lt;div class=&#39;error&#39;&gt;error text&lt;/div&gt;
  &lt;blockquote&gt;
    This is some demo text.
  &lt;/blockquote&gt;

  &lt;p&gt;
    ...and here is some boring normal text.
  &lt;/p&gt;

  &lt;button onClick=&quot;applyStyle(&#39;pobox&#39;)&quot;&gt;Pobox&lt;/button&gt;
  &lt;button onClick=&quot;applyStyle(&#39;listbox&#39;)&quot;&gt;Listbox&lt;/button&gt;

&lt;pre&gt;
PROGRAM_SOURCE
&lt;/pre&gt;
&lt;/body&gt;
&lt;/html&gt;
HTML

my $source = do {
  seek *DATA, 0, 0;
  local $/;
  &lt;DATA&gt;;
};

$source = encode_entities($source);
$HTML =~ s/PROGRAM_SOURCE/$source/;

print $HTML;
__DATA__

</pre>
</body>
</html>
